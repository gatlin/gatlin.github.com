"use strict";var App;App=angular.module("app",["ngCookies","ngResource","app.controllers","app.directives","app.filters","app.services"]),App.config(["$routeProvider","$locationProvider",function(e,t,n){return e.when("/e/:id",{templateUrl:"/partials/edit.html"}).when("/p/:id",{templateUrl:"/partials/page.html"}).otherwise({redirectTo:"/p/home"}),t.html5Mode(!1)}]),"use strict",angular.module("app.controllers",["ui","ngSanitize"]).controller("AppCtrl",["$scope","$location","$resource","$rootScope",function(e,t,n,r){return e.$location=t,e.$watch("$location.path()",function(t){return e.activeNavId=t||"/"}),e.getClass=function(t){return e.activeNavId.substring(0,t.length)===t?"active":""},e.converter=new Showdown.converter,e.md2html=function(t){return e.converter.makeHtml(t)},e.html2md=function(e){var t;return t=e.split("\n").map($.trim).filter(function(e){return e!==""}).join("\n"),toMarkdown(t)}}]).value("ui.config",{jq:{wysihtml5:{useLineBreaks:!1,autoLink:!0,parserRules:wysihtml5ParserRules,stylesheets:["/css/app.css"]}}}).directive("editable",function(){return function(e,t,n){var r,i;return i=n.id,r=$("#"+i).data("wysihtml5").editor,r.on("load",function(){return e.$watch("content",function(){return r.focus(),r.composer.commands.exec("insertHTML",e.content)})}),r.on("change",function(){return e.pouchdb.get(e.pageId,function(t,n){return n.content=$("#"+i).val(),e.pouchdb.put(n,function(e,t){return console.log(t)})})})}}).controller("EditCtrl",["$scope","$routeParams",function(e,t){return e.pageId=t.id,console.log(e.pageId),Pouch("idb://pages",function(t,n){return e.pouchdb=n,n.get(e.pageId,function(t,r){return t?(n.put({_id:e.pageId,content:""}),e.content=""):(console.log(r),e.$apply(function(){return e.content=r.content,console.log(e.content),console.log(r.content)}))})})}]).controller("PageCtrl",["$scope","$routeParams",function(e,t){return e.pageId=t.id,console.log(e.pageId),Pouch("idb://pages",function(t,n){return e.pouchdb=n,n.get(e.pageId,function(t,r){return t?(n.put({_id:e.pageId,content:""}),e.content=""):(console.log(r),e.$apply(function(){return e.content=r.content,console.log(e.content),console.log(r.content)}))})})}]),"use strict",angular.module("app.directives",["app.services"]).directive("appVersion",["version",function(e){return function(t,n,r){return n.text(e)}}]),"use strict",angular.module("app.filters",[]).filter("interpolate",["version",function(e){return function(t){return String(t).replace(/\%VERSION\%/mg,e)}}]),"use strict",angular.module("app.services",[]).factory("version",function(){return"0.1"})