<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ancestry By DNA</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <style>
      body {
        padding-top: 10px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
      .chart {
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    -webkit-box-shadow: 0 1px 3px #666;
    background: #ddd url(img/bg.png);
    margin: 0 6auto;
    padding: 0;
    height: 500px;
}
.chart object {
    margin: 0;
    padding: 0;
}
p {
    text-align: left;
    margin: .5em 2em;
}
</style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="ico/favicon.png">
  </head>

  <body>
            <div class="span11 chart">
                <object data="img/worldMap.svg" type="image/svg+xml"
                    style="width: 100%; height: 100%;"
                    id="earth"></object>
            </div>
       

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/raphael.js"></script>
    <script src="js/g.raphael.js"></script>
    <script src="js/g.pie.js"></script>
    <script src="js/g.bar.js"></script>
    <script type="text/javascript">
        var a = document.getElementById("earth");
        //var b = document.getElementById("lineageMap");
        var africa = [
            "ZA",
            "NG",
            "algeria",
            "AO",
            "MA",
            "SD",
            "TN",
            "ghana",
            "LY",
            "KE",
            "ET",
            "cameroon",
            "TZ",
            "zambia",
            "botswana",
            "UG",
            "GA",
            "dem._rep._of_the_congo",
            "rep._of_the_congo",
            "senegal",
            "MZ",
            "NA",
            "mali",
            "madagascar",
            "chad",
            "zimbabwe",
            "benin",
            "RW",
            "niger",
            "malawi",
            "GN",
            "mauritania",
            "swaziland",
            "togo",
            "eritrea",
            "lesotho",
            "burundi",
            "sierra_leone",
            "cape_verde",
            "djibouti",
            "liberia",
            "the_gambia",
//            "GW",
            "comoros",
            "central_african_republic",
            "SO",
            "burkina_faso",
            "western_sahara",
            "GA",
            "cote_d_ivoire",
            "GQ",
            "GN-bissau",
        ];
        var americas = [
            "BR",
            "CO",
            "AR",
            "VE",
            "PE",
            "CL",
            "EC",
            "bolivia",
            "paraguay",
            "uruguay",
            "GY",
            "suriname",
            "french_guiana",
            "MX",
            "cuba",
            "dominican_republic",
            "GT",
            "CR",
            "panama",
            "SV",
            "HN",
            "jamaica",
            "NI",
            "haiti",
            "BS",
            "belize",
            "islands",
            "US_HI",
            "US_AK",
            "US_AZ",
            "US_NM",
            "US_OK",
            "US_UT",
            "US_WY",
            "US_ID",
            "US_WA",
            "US_MT",
            "US_SD",
            "US_ND",
            "US_CO",
            "US_NE",
            "US_NV",
            "West_US_VA",
            "US_KS",
            "US_OR",
            "US_MN",
            "US_CA",
            "US_WI",
            "US_IA",
            "US_TX",
            "US_FL",
            "US_MI",
            "US_AR",
            "US_MO",
            "US_ME",
            "US_AL",
            "US_IL",
            "US_MS",
            "US_IN",
            "US_LA",
            "US_OH",
            "US_TN",
            "US_KY",
            "US_VT",
            "US_RI",
            "US_NC",
            "US_NY",
            "US_VA",
            "US_NH",
            "US_SC",
            "US_MD",
            "US_MA",
            "US_CT",
            "US_GA",
            "US_NJ",
            "US_PA",
            "US_DE",
            "US_DE",
            "CA_PE",
            "CA_ON",
            "CA_NB",
            "CA_NS",
            "CA_NL",
            "CA_PQ",
            "CA_YT",
            "CA_AB",
            "CA_SK",
            "CA_MB",
            "CA_BC",
            "CA_NU",
            "CA_NT",
        ];
        var europe = [
            "DE",
            "FR",
            "UK",
            "IT",
            "ES",
            "ukraine",
            "PL",
            "RO",
            "neth.",
            "GR",
            "BE",
            "PT",
            "CZ",
//            "HU",
            "hungaria",
            "BY",
            "SE",
            "AT",
            "switz.",
            "bulgaria",
            "denmark",
//            "finland",
            "Finland",
            "NO",
            "IE",
            "HR",
            "BA",
            "moldova",
            "LT",
            "alb.",
            "SI",
            "est.",
            "mont.",
            "luxembourg",
            "malta",
            "iceland",
            "andorra",
            "liech",
            "GB",
            "lat.",
            "slov.",
            "ser.",
            "KV",
            // middle east
            "EG",
            "yemen",
            "OM",
            "SA",
            "united_arab_emirates",
            "QA",
            "IR",
            "IQ",
            "KW",
            "SY",
            "jordan",
            "IL",
            "TR",
            "lebanon",
            "azerbaijan",
            "turkmenistan",
            "georgia",
            "armenia",
        ];
        var asia = [
            "RU",
            "brunei",
            "burma",
            "IN",
            "ID",
            "AF",
            "BD",
            "BT",
            "KH",
            "CN",
            "TL",
            "JP",
            "kazakhstan",
            "KP",
            "KR",
            "laos",
            "MY",
            "MN",
            "NP",
            "PK",
//            "papa_new_guinea",
            "papua_new_guinea",
            "PH",
            "rus.",
            "SG",
            "sri_lanka",
            "TH",
            "uzbekistan",
            "VN",
            "tajikstan",
            "kyrgyzstan",
            "indian_claim",
            "AU",
            "NZ",
        ];

        var getParameter = function(name)
        {
          name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
          var regexS = "[\\?&]" + name + "=([^&#]*)";
          var regex = new RegExp(regexS);
          var results = regex.exec(window.location.search);
          if(results == null)
            return "";
          else
            return decodeURIComponent(results[1].replace(/\+/g, " "));
        }

        var africaOpacity = getParameter('africa');
        var americaOpacity = getParameter('america');
        var europeOpacity = getParameter('europe');
        var australasiaOpacity = getParameter('australasia');
        var vals = [africaOpacity*100
                   ,americaOpacity*100
                   ,europeOpacity*100
                   ,australasiaOpacity*100];

        //it's important to add an load event listener to the object, as it will load the svg doc asynchronously

                   /*
        var pie = Raphael("pie");
        var pc = pie.piechart(320,240,175,vals,{
colors: ["#1BE050","#E04C1B","#D61BE0","#E67A1C"],
legend: ["Africa","Americas","Europe","Australasia"],
        });
        pc.hover(function () {
            this.sector.stop();
            this.sector.scale(1.1,1.1,this.cx,this.cy);

            if (this.label) {
                this.label[0].stop();
                this.label[0].attr({r:7.5});
                this.label[1].attr({"font-weight":800});
            }
        },function() {
            this.sector.animate({transform: 's1 1 ' + this.cx + ' ' + this.cy
                },500, "bounce");
            if (this.label) {
                this.label[0].animate({r:5},500,"bounce");
                this.label[1].attr({"font-weight":400});
            }
        });

        var bar = Raphael("bar");
        bar.barchart(50,30,450,400,vals,{
colors: ["#1BE050","#E04C1B","#D61BE0","#E67A1C"],
}).hover(function() {
    this.flag = bar.popup(this.bar.x, this.bar.y,
        Math.floor(this.bar.value.value) || "0").insertBefore(this);
    },function() {
    this.flag.animate({opacity: 0}, 300, function () {this.remove();});
    });
    */
        a.addEventListener("load",function(){
            var svgDoc = a.contentDocument; //get the inner DOM of alpha.svg
            for (var i = 0; i < africa.length; i++) {
                var c = africa[i];
                var country = svgDoc.getElementById(c);
                console.log("country: " + country.id);
                var els = country.getElementsByTagName('path');
                for (var e = 0; e < els.length; e++) {
                    els[e].style.fill = "#1BE050";
                    els[e].style.opacity = africaOpacity;
                }
            }
            for (var i = 0; i < americas.length; i++) {
                var c = americas[i];
                var country = svgDoc.getElementById(c);
                console.log("country: " + country.id);
                var els = country.getElementsByTagName('path');
                for (var e = 0; e < els.length; e++) {
                    els[e].style.fill = "#E04C1B";
                    els[e].style.opacity = americaOpacity;
                }
            }
            for (var i = 0; i < europe.length; i++) {
                var c = europe[i];
                var country = svgDoc.getElementById(c);
                console.log("country: " + country.id);
                var els = country.getElementsByTagName('path');
                for (var e = 0; e < els.length; e++) {
                    els[e].style.fill = "#D61BE0";
                    els[e].style.opacity = europeOpacity;
                }
            }
            for (var i = 0; i < asia.length; i++) {
                var c = asia[i];
                var country = svgDoc.getElementById(c);
                console.log("country: " + country.id);
                var els = country.getElementsByTagName('path');
                for (var e = 0; e < els.length; e++) {
                    els[e].style.fill = "#E67A1C";
                    els[e].style.opacity = australasiaOpacity;
                }
            }
            //var delta = svgDoc.getElementById("iceland"); //get the inner element by id
            //delta.addEventListener("mousedown",function(){alert('hello world!')},false);    //add behaviour
        },false);
    </script>
  </body>
</html>

